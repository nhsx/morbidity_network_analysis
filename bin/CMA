#!/usr/bin/env python3

""" Command line executable """

import sys
import CMA
import logging
from timeit import default_timer as timer

if __name__ == '__main__':
    # Parse command line arguments
    args = CMA.parseArgs.parseArgs()
    # Initialise logging
    logFormat = '%(asctime)s - %(levelname)s - %(funcName)s - %(message)s'
    logging.basicConfig(level=args.verbose, format=logFormat)
    del args.verbose, args.command
    # Pop main function and excute script
    function = args.__dict__.pop('function')
    start = timer()
    rc = function(**vars(args))
    end = timer()
    logging.info(f'Total execution time: {end - start:.3f} seconds.')
    logging.shutdown()
    sys.exit(rc)
